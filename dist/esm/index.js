import e,{useState as n,useEffect as t}from"react";import{ScrollRestoration as a,Outlet as c,Link as r,useNavigate as l,useNavigation as o,useLoaderData as i,RouterProvider as s,createBrowserRouter as m}from"react-router-dom";function d(e,t,a){const[c,r]=n({});function l(n){a(e,n)}return[e.reduce(((e,n)=>(n.field in c&&e.push({...n,label:c[n.field]}),e)),[]),function(e,n){r((t=>({[e]:n,...t})))},function(e){r((n=>Object.keys(n).reduce(((t,a)=>(a!==e&&(t[a]=n[a]),t)),{})))},l,function(){t>1&&l(t-1)},function(){l(t+1)},function(){a([],1)},function(n,t){const c=e.reduce(((e,a)=>{let c=a.values;return a.field===n&&(c=c.filter((e=>e!==t))),c.length>0&&e.push({field:a.field,values:c}),e}),[]);a(c,1)},function(n,t){let c=[{field:n,values:[t]}];e.length>0&&(c=e.reduce(((e,a)=>{let c=a.values;return a.field!==n||c.includes(t)||c.push(t),c.length>0&&e.push({field:a.field,values:c}),e}),[]),c.find((e=>e.field===n))||c.push({field:n,values:[t]})),a(c,1)}]}function h(e,a,c,r="Free text",l="FREE_TEXT"){const[o,i]=n("");function s(){""!==o&&(c(l,o),i(""))}return t((()=>(e(l,r),()=>a(l))),[l]),[o,s,function(e){i(e.currentTarget.value)},function(e){"Enter"===e.key&&s()}]}function u(e,a,c,r,l,o,i,s=!1,m=10,d=500){const[h,u]=n([]),[g,p]=n(""),[f,x]=n(10),[E,y]=n(!0),[b,v]=n(!0),[F,w]=n(!0);async function C(){y(!0);const e=await(s?(async()=>fetch(c,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:a,amount:f,filter:g,searchvalues:i})}))():(async()=>fetch(`${c}?name=${a}&amount=${f}&filter=${g}`))()),n=await e.json();u(n),y(!1)}return t((()=>(r(a,e),()=>l(a))),[a]),t((()=>{C()}),[a,f,g,i]),[h,E,F,w,b,function(){v(!b),x(b?d:m)},function(e){o(a,e)},function(e){p(e.currentTarget.value)}]}function g(e,n,t,a){return async c=>{const r={...c?e(c):{searchvalues:[],page:1},page_length:t,sortorder:a},l=await fetch(n,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(r)});return[r,await l.json()]}}function p(e){return async n=>fetch(e(n))}function f({header:n,footer:t}){return e.createElement(e.Fragment,null,n,e.createElement(a,null),e.createElement(c,null),t)}function x({title:n,description:t,updateDocumentTitle:a=!0}){return a&&(document.title=n),e.createElement("div",{className:"hcContentContainer"},e.createElement("h2",null,n),t&&e.createElement("p",null,t),e.createElement(r,{to:"search/"},"Browse"))}function E(e,n){void 0===n&&(n={});var t=n.insertAt;if(e&&"undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],c=document.createElement("style");c.type="text/css","top"===t&&a.firstChild?a.insertBefore(c,a.firstChild):a.appendChild(c),c.styleSheet?c.styleSheet.cssText=e:c.appendChild(document.createTextNode(e))}}function y({title:n}){return e.createElement(e.Fragment,null,e.createElement("div",{className:"hcContentContainer pageHeader"},e.createElement("header",{className:"hcPageHeaderSimple hcBasicSideMargin"},e.createElement("div",{className:"hcBrand"},e.createElement(r,{to:"/"},e.createElement("div",{className:"hcTitle"},n))))),e.createElement("div",{className:"hcContentContainer pageHeaderAfter"}))}function b(e,n=1){return Array.from({length:e},((e,t)=>t+n))}E(".hcPageHeaderSimple {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    font-size: 0.9rem;\n    width: 100%;\n}\n\n.hcPageHeaderSimple > * {\n    height: 100%;\n    display: flex;\n    align-items: center;\n}\n\n.hcBrand {\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n    height: 100%;\n}\n\n.hcTitle {\n    display: inline-block;\n    font-weight: bold;\n    font-size: 24px;\n    padding-top: 18px;\n}\n\n.pageHeader {\n    margin-bottom: 1rem;\n    background-color: #082045;\n    color: #fff;\n}\n\n.pageHeader a {\n    color: #fff;\n}\n\n.pageHeaderAfter {\n    margin-bottom: 5rem;\n    border-bottom: 1px solid #ededed;\n}");var v=Object.freeze({__proto__:null,getNextPages:function(e,n,t=4){return b(e+t<n?t:n-e,e+1)},getPages:b,getPrevPages:function(e,n=4){const t=e-n>0?n:e-1;return b(t,e-t)}});const F=new TextEncoder,w=new TextDecoder;function C(e){const n=F.encode(e),t=String.fromCodePoint(...n);return btoa(t)}function S(e){const n=atob(e),t=Uint8Array.from(n,(e=>e.codePointAt(0)));return w.decode(t)}var N=Object.freeze({__proto__:null,decode:S,encode:C});function P(e){return C(JSON.stringify(e))}function T(e){return e?JSON.parse(S(e)):{searchvalues:[],page:1}}function k(e){const n=new URLSearchParams;for(const t of e.searchvalues)for(const e of t.values)n.append(t.field,e);return n.set("page",e.page.toString()),e.page_length&&n.set("page_length",e.page_length.toString()),e.sortorder&&n.set("sort",e.sortorder),n}function L(e){const n=e.get("page"),t=e.get("page_length"),a=e.get("sort");return{searchvalues:[...new Set(e.keys())].filter((e=>!["page","page_length","sort"].includes(e))).map((n=>({field:n,values:e.getAll(n)}))),page:n&&!isNaN(parseInt(n))?parseInt(n):1,page_length:t&&!isNaN(parseInt(t))?parseInt(t):void 0,sortorder:a||void 0}}var I,R=Object.freeze({__proto__:null,createCodeFromSearchObject:P,createParamsFromSearchObject:k,getSearchObjectFromCode:T,getSearchObjectFromParams:L});function j({title:n,pageLength:t,hasIndexPage:a=!0,withPaging:c=!0,updateDocumentTitle:r=!0,showSearchHeader:s=!0,searchParams:m=I.CODE,ResultItemComponent:h,FacetsComponent:u,headersElement:g}){const p=l(),f=o(),[{searchvalues:x,page:E},{amount:y,pages:b,items:v}]=i(),[F,w,C,S,N,T,L,R,j]=d(x,E,(function(e,n){const t={searchvalues:e,page:n};switch(m){case I.PARAMS:const e=k(t);p((a?"/search?":"?")+e.toString());break;case I.CODE:default:const n=P(t);p((a?"/search/":"/")+n)}window.scroll(0,0)}));return r&&(document.title=n?`Search | ${n}`:"Search"),e.createElement("div",{className:"hcContentContainer"},s&&e.createElement("div",{className:"hcBasicSideMargin hcMarginBottom1"},e.createElement("h1",null,"Search")),e.createElement("div",{className:"hcLayoutFacet-Result hcBasicSideMargin"},e.createElement("div",{className:"hcLayoutFacets"},e.createElement("div",{className:"hcLayoutFacetsToggel"},e.createElement(u,{registerFacet:w,unregisterFacet:C,setFacet:j,searchValues:x}))),e.createElement("div",{className:"hcLayoutResults"},e.createElement(z,{withPaging:!!c,amount:y,page:E,pages:b}),e.createElement(O,{labeledSearchValues:F,resetFacets:L,removeFacet:R}),g,"loading"===f.state?e.createElement("div",{className:"hcResultListLoading"},"Loading..."):e.createElement(e.Fragment,null,e.createElement("div",null,v.map(((n,t)=>e.createElement(h,{item:n,key:t})))),c&&y>t&&e.createElement(_,{page:E,pages:b,prevPage:N,nextPage:T,selectPage:S})))))}function z({withPaging:n,amount:t,page:a,pages:c}){return e.createElement("div",{className:"hcResultsHeader hcMarginBottom1"},n?t>9999?e.createElement("div",null,t,"+ results, page ",a," of ",c," pages"):e.createElement("div",null,t," results, page ",a," of ",c," pages"):e.createElement("div",null,t," items found"))}function O({labeledSearchValues:n,resetFacets:t,removeFacet:a}){return e.createElement("div",{className:"hcMarginBottom2"},e.createElement("div",{className:"hcSmallTxt hcTxtColorGreyMid"},"Selected facets:",e.createElement("span",{className:"hcFacetReset hcClickable",onClick:t},"Reset facets")),0===n.length?e.createElement("span",{className:"hcSelectedFacet"},e.createElement("span",{className:"hcSelectedFacetType"},"None")):n.map((n=>e.createElement("span",{className:"hcSelectedFacet",key:n.field},e.createElement("span",{className:"hcSelectedFacetType"},n.label,": "),n.values.map(((t,c)=>e.createElement("div",{className:"hcFacetValues",key:c,onClick:e=>a(n.field,t)},t," [x]")))))))}function _({page:n,pages:t,prevPage:a,nextPage:c,selectPage:r}){return e.createElement("div",{className:"hcPagination"},n>1&&e.createElement("div",{className:"hcClickable",onClick:a},"← Previous"),e.createElement("div",{className:"hcClickable"},e.createElement("select",{className:"hcPageSelector",value:n,onChange:e=>r(Number(e.target.value))},b(t).map((n=>e.createElement("option",{key:n,value:n},n))))),n<t&&e.createElement("div",{className:"hcClickable",onClick:c},"Next →"))}function A({title:n,updateDocumentTitle:t=!0,DetailComponent:a}){const c=o(),r=i();return t&&(document.title=n?`Item | ${n}`:"Item"),"loading"===c.state?e.createElement("div",{className:"hcContentContainer"},e.createElement("div",null,"Loading")):e.createElement(a,{data:r})}function M({registerFacet:n,unregisterFacet:t,setFacet:a,name:c="Text search",field:r}){const[l,o,i,s]=h(n,t,a,c,r);return e.createElement("div",{className:"hcFacet"},e.createElement("div",{className:"hcFacetTitle"},c),e.createElement("div",{className:"hcFacetSearch"},e.createElement("input",{type:"text",value:l,placeholder:"Press ENTER to search",onChange:i,onKeyUp:s}),e.createElement("button",{type:"button",name:"button",onClick:o},"Search")))}function B({registerFacet:n,unregisterFacet:t,setFacet:a,name:c,field:r,url:l,searchValues:o,usePost:i=!1,flex:s=!0}){const[m,d,h,g,p,f,x]=u(c,r,l,n,t,a,o,i);return e.createElement("div",{className:"hcFacet"},e.createElement("div",{className:"hcFacetTitle",onClick:()=>g(!h)},e.createElement("span",null,c),e.createElement("span",{className:"hcIconHelp"},h?"+":"-")),!h&&e.createElement("div",{className:"hcFacetItems"},d?e.createElement("div",null,"Loading..."):e.createElement("div",null,m.map(((n,t)=>e.createElement("div",{key:t,className:"hcFacetItem",onClick:()=>x(n.key)},e.createElement("div",{className:"checkBoxLabel"}," ",n.key," (",n.doc_count,")")))),s&&e.createElement("div",{className:"hcClickable",onClick:f},p?e.createElement("div",null,"More..."):e.createElement("div",null,"Less...")))))}!function(e){e[e.CODE=0]="CODE",e[e.PARAMS=1]="PARAMS"}(I||(I={}));function D(n){const t=n.AppComponent?e.createElement(n.AppComponent,null,e.createElement(a,null),e.createElement(c,null)):e.createElement(f,{header:n.headerElement||e.createElement(y,{title:n.title}),footer:n.footerElement});let r,l;switch(n.searchParams){case I.PARAMS:const e=g(L,n.searchUrl,n.pageLength,n.sortOrder);r=async({request:n})=>e(new URL(n.url).searchParams),l=n.hasIndexPage?null:"search";break;case I.CODE:default:const t=g(T,n.searchUrl,n.pageLength,n.sortOrder);r=async({params:e})=>t(e.code),l=n.hasIndexPage?"search/:code":":code"}const o=e.createElement(j,{title:n.title,pageLength:n.pageLength,hasIndexPage:n.hasIndexPage,withPaging:n.withPaging,updateDocumentTitle:n.updateDocumentTitle,searchParams:n.searchParams,FacetsComponent:n.FacetsComponent,ResultItemComponent:n.ResultItemComponent,headersElement:n.headersElement}),i=[...n.childRoutes||[],{index:!0,loader:n.hasIndexPage?void 0:r,element:n.hasIndexPage?n.rootElement||e.createElement(x,{title:n.title,description:n.description}):o},{path:"detail/:id",loader:async({params:e})=>fetch(n.getFetchUrl(e.id)),element:e.createElement(A,{title:n.title,DetailComponent:n.DetailComponent})}];null!==l&&i.push({path:l,loader:r,element:o});const d={path:"/",element:t,children:i};return e.createElement(s,{router:m([d])})}E('@import url("https://fonts.googleapis.com/css?family=Roboto:300,300i,700,700i");\n\nhtml,\nbody {\n    padding: 0;\n    margin: 0;\n}\n\n* {\n    box-sizing: border-box;\n}\n\na {\n    color: #0087d4;\n    text-decoration: none;\n}\n\nhtml {\n    font-size: 100%;\n}\n\nbody {\n    font-family: "Roboto", sans-serif;\n    font-weight: 300;\n    font-size: 18px;\n    line-height: 140%;\n    font-style: normal;\n    background-color: #fff;\n    color: #3e3e3e;\n    margin: 0;\n    padding: 0;\n}\n\nh1 {\n    font-size: 1.5em;\n    line-height: 130%;\n    font-weight: 700;\n}\n\nh2 {\n    font-size: 1.3em;\n    line-height: 130%;\n    font-weight: 700;\n}\n\nh1, h2 {\n    margin-top: 0;\n    margin-bottom: 0.3em;\n}\n\n@media (min-width: 600px) {\n    body {\n        font-size: 18px;\n        line-height: 150%;\n    }\n\n    h1 {\n        font-size: 2em;\n    }\n\n    h1, h2 {\n        line-height: 150%;\n    }\n\n    span.hcSelectedFacet, span.hcSelectedFacetType {\n        display: flex;\n        flex-direction: row;\n        align-items: baseline;\n        padding-right: 1rem;\n    }\n}\n\n.hcContentContainer p {\n    margin-top: 0;\n    margin-bottom: 1em;\n}\n\n.hcFacet button, .hcButton {\n    font-size: 0.7rem;\n    padding: 0.5rem;\n    border-radius: 4px;\n    background-color: rgba(0, 0, 0, 0.07);\n    border: 1px solid rgba(0, 0, 0, 0.09);\n    cursor: pointer;\n    font-weight: 700;\n    margin: 0 0.3rem;\n    max-height: 40px;\n}\n\n.hcFacet input, .hcPageSelector select {\n    width: 100%;\n    padding: 0.5rem;\n    border: 1px solid #e1ebf3;\n    border-radius: 4px;\n    font-size: 1rem;\n    font-weight: 300;\n    color: #3e3e3e;\n    height: 40px;\n}\n\n.hcFacetSearch input::placeholder {\n    color: gray;\n    font-style: italic;\n    font-size: 0.85rem;\n}\n\n.hcContentContainer {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n}\n\n.hcTxtColorGreyMid {\n    color: #666666;\n}\n\n.hcSmallTxt {\n    font-size: 0.85rem;\n}\n\n.hcBasicSideMargin {\n    padding-left: 2rem;\n    padding-right: 2rem;\n}\n\n.hcMarginBottom1 {\n    margin-bottom: 1rem;\n}\n\n.hcMarginBottom2 {\n    margin-bottom: 2rem;\n}\n\n.hcResultsHeader {\n    display: flex;\n    justify-content: space-between;\n}\n\n.hcContentContainer > * {\n    width: 100%;\n    max-width: 1200px;\n}\n\n.hcLayoutFacet-Result {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n}\n\n.hcLayoutFacets {\n    width: 100%;\n}\n\n.hcLayoutResults {\n    width: 100%;\n}\n\n.hcLayoutFacetsToggel {\n    display: flex;\n    height: 230px;\n    flex-direction: row;\n    overflow-x: hidden;\n    background-color: #fafafa;\n}\n\n.hcLayoutFacetsToggel div {\n    width: 250px;\n    margin-right: 3rem;\n}\n\n@media (min-width: 800px) {\n    .hcLayoutFacet-Result {\n        flex-direction: row;\n    }\n\n    .hcLayoutFacets {\n        width: 350px;\n    }\n\n    .hcLayoutResults {\n        width: calc(100% - 350px);\n    }\n\n    .hcLayoutFacetsToggel {\n        display: block;\n        overflow-x: hidden;\n        height: auto;\n        flex-direction: column;\n        background: none;\n    }\n\n    .hcLayoutFacetsToggel div {\n        width: 100%;\n        margin-right: auto;\n    }\n}\n\n.hcFacet {\n    margin-bottom: 1rem;\n    max-width: 250px;\n    font-size: 0.85rem;\n}\n\n.hcFacetItems {\n    display: flex;\n    flex-direction: column;\n}\n\n.hcFacetItem {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.hcFacetItem .hcFacetItemSpan {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    height: 15px;\n}\n\n.hcFacetItem .hcFacetItemSpan input[type=checkbox] {\n    width: 15px;\n    background-color: #eee090;\n}\n\n.hcFacetItemSelected {\n    font-weight: 700;\n}\n\n.hcFacetTitle {\n    text-transform: uppercase;\n    font-size: 0.85rem;\n    font-weight: 700;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    cursor: pointer;\n}\n\n.hcFacetCount {\n    color: #666666;\n}\n\n.hcFacetSearch {\n    display: flex;\n    justify-content: space-between;\n}\n\n.hcFacetSearch input {\n    border-radius: 4px 0 0 4px;\n    border-right: 0;\n}\n\n.hcFacetSearch button {\n    margin: 0;\n    border-radius: 0 4px 4px 0;\n}\n\n.hcSelectedFacet {\n    font-size: 0.85rem;\n    padding: 0.2rem 0.5rem;\n    background-color: #f6f6f6;\n    border-radius: 3px;\n    margin: 0 0.5rem 0.5rem 0;\n    cursor: pointer;\n}\n\n.hcSelectedFacet:after {\n    margin-left: 0.3rem;\n    opacity: 0.4;\n}\n\n.hcSelectedFacetType {\n    color: rgba(0, 0, 0, 0.4);\n    font-style: italic;\n    margin-right: 0.3rem;\n}\n\n.hcFacetFilter input {\n    padding: 0.3rem;\n    font-size: 0.85rem;\n    height: auto;\n    border: 1px solid #ebebeb;\n}\n\n.hcFacetFilter input::placeholder {\n    font-style: italic;\n    color: rgba(0, 0, 0, 0.4);\n}\n\n.hcFacetHelp {\n    display: none;\n    position: absolute;\n    background-color: #25a39a;\n    padding: 0.5rem;\n    width: 250px;\n}\n\n.hcPagination {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    flex-wrap: wrap;\n}\n\n.hcPagination > * {\n    margin: 0 0.5rem;\n}\n\n.hcPagination a {\n    padding: 0.5rem;\n}\n\n.hcTxtColorGreyMid {\n    color: #999999;\n}\n\n.hcSmallTxt {\n    font-size: 0.9rem;\n}\n\n.hcClickable {\n    color: #0087d4;\n    cursor: pointer;\n    display: inline;\n}\n\n.hcPageSelector {\n    height: 36px;\n    font-size: 12px !important;\n}\n\n.hcFacetItem {\n    cursor: pointer;\n}\n\n.hcFacetReset {\n    float: right;\n}\n\n.hcFacetValues {\n    margin-right: 4px;\n}\n');export{f as App,A as Detail,M as FreeTextFacet,x as Home,B as ListFacet,y as PageHeader,D as Router,j as Search,I as SearchParams,N as base64,p as createDetailLoader,g as createSearchLoader,v as pagingUtils,R as searchUtils,h as useFreeTextFacet,u as useListFacet,d as useSearch};
