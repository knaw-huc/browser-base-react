"use strict";var e=require("react"),n=require("react-router-dom");function t(n,t,a){const[r,c]=e.useState({});function o(e){a(n,e)}return[n.reduce(((e,n)=>(n.field in r&&e.push({...n,label:r[n.field]}),e)),[]),function(e,n){c((t=>({[e]:n,...t})))},function(e){c((n=>Object.keys(n).reduce(((t,a)=>(a!==e&&(t[a]=n[a]),t)),{})))},o,function(){t>1&&o(t-1)},function(){o(t+1)},function(){a([],1)},function(e,t){const r=n.reduce(((n,a)=>{let r=a.values;return a.field===e&&(r=r.filter((e=>e!==t))),r.length>0&&n.push({field:a.field,values:r}),n}),[]);a(r,1)},function(e,t){let r=[{field:e,values:[t]}];n.length>0&&(r=n.reduce(((n,a)=>{let r=a.values;return a.field!==e||r.includes(t)||r.push(t),r.length>0&&n.push({field:a.field,values:r}),n}),[]),r.find((n=>n.field===e))||r.push({field:e,values:[t]})),a(r,1)}]}function a(n,t,a,r="Free text",c="FREE_TEXT"){const[o,l]=e.useState("");function i(){""!==o&&(a(c,o),l(""))}return e.useEffect((()=>(n(c,r),()=>t(c))),[c]),[o,i,function(e){l(e.currentTarget.value)},function(e){"Enter"===e.key&&i()}]}function r(n,t,a,r,c,o,l,i=!1,s=10,m=500){const[d,h]=e.useState([]),[u,p]=e.useState(""),[g,f]=e.useState(10),[x,E]=e.useState(!0),[y,v]=e.useState(!0),[b,F]=e.useState(!0);async function S(){E(!0);const e=await(i?(async()=>fetch(a,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({name:t,amount:g,filter:u,searchvalues:l})}))():(async()=>fetch(`${a}?name=${t}&amount=${g}&filter=${u}`))()),n=await e.json();h(n),E(!1)}return e.useEffect((()=>(r(t,n),()=>c(t))),[t]),e.useEffect((()=>{S()}),[t,g,u,l]),[d,x,b,F,y,function(){v(!y),f(y?m:s)},function(e){o(t,e)},function(e){p(e.currentTarget.value)}]}function c(e,n,t,a){return async r=>{const c={...r?e(r):{searchvalues:[],page:1},page_length:t,sortorder:a},o=await fetch(n,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(c)});return[c,await o.json()]}}function o({header:t,footer:a}){return e.createElement(e.Fragment,null,t,e.createElement(n.ScrollRestoration,null),e.createElement(n.Outlet,null),a)}function l({title:t,description:a,updateDocumentTitle:r=!0}){return r&&(document.title=t),e.createElement("div",{className:"hcContentContainer"},e.createElement("h2",null,t),a&&e.createElement("p",null,a),e.createElement(n.Link,{to:"search/"},"Browse"))}function i(e,n){void 0===n&&(n={});var t=n.insertAt;if(e&&"undefined"!=typeof document){var a=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===t&&a.firstChild?a.insertBefore(r,a.firstChild):a.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}function s({title:t}){return e.createElement(e.Fragment,null,e.createElement("div",{className:"hcContentContainer pageHeader"},e.createElement("header",{className:"hcPageHeaderSimple hcBasicSideMargin"},e.createElement("div",{className:"hcBrand"},e.createElement(n.Link,{to:"/"},e.createElement("div",{className:"hcTitle"},t))))),e.createElement("div",{className:"hcContentContainer pageHeaderAfter"}))}function m(e,n=1){return Array.from({length:e},((e,t)=>t+n))}i(".hcPageHeaderSimple {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    font-size: 0.9rem;\n    width: 100%;\n}\n\n.hcPageHeaderSimple > * {\n    height: 100%;\n    display: flex;\n    align-items: center;\n}\n\n.hcBrand {\n    display: flex;\n    flex-direction: row;\n    justify-content: flex-start;\n    height: 100%;\n}\n\n.hcTitle {\n    display: inline-block;\n    font-weight: bold;\n    font-size: 24px;\n    padding-top: 18px;\n}\n\n.pageHeader {\n    margin-bottom: 1rem;\n    background-color: #082045;\n    color: #fff;\n}\n\n.pageHeader a {\n    color: #fff;\n}\n\n.pageHeaderAfter {\n    margin-bottom: 5rem;\n    border-bottom: 1px solid #ededed;\n}");var d=Object.freeze({__proto__:null,getNextPages:function(e,n,t=4){return m(e+t<n?t:n-e,e+1)},getPages:m,getPrevPages:function(e,n=4){const t=e-n>0?n:e-1;return m(t,e-t)}});const h=new TextEncoder,u=new TextDecoder;function p(e){const n=h.encode(e),t=String.fromCodePoint(...n);return btoa(t)}function g(e){const n=atob(e),t=Uint8Array.from(n,(e=>e.codePointAt(0)));return u.decode(t)}var f=Object.freeze({__proto__:null,decode:g,encode:p});function x(e){return p(JSON.stringify(e))}function E(e){return e?JSON.parse(g(e)):{searchvalues:[],page:1}}function y(e){const n=new URLSearchParams;for(const t of e.searchvalues)for(const e of t.values)n.append(t.field,e);return n.set("page",e.page.toString()),e.page_length&&n.set("page_length",e.page_length.toString()),e.sortorder&&n.set("sort",e.sortorder),n}function v(e){const n=e.get("page"),t=e.get("page_length"),a=e.get("sort");return{searchvalues:[...new Set(e.keys())].filter((e=>!["page","page_length","sort"].includes(e))).map((n=>({field:n,values:e.getAll(n)}))),page:n&&!isNaN(parseInt(n))?parseInt(n):1,page_length:t&&!isNaN(parseInt(t))?parseInt(t):void 0,sortorder:a||void 0}}var b,F=Object.freeze({__proto__:null,createCodeFromSearchObject:x,createParamsFromSearchObject:y,getSearchObjectFromCode:E,getSearchObjectFromParams:v});function S({title:a,pageLength:r,hasIndexPage:c=!0,withPaging:o=!0,updateDocumentTitle:l=!0,showSearchHeader:i=!0,searchParams:s=exports.SearchParams.CODE,ResultItemComponent:m,FacetsComponent:d,headersElement:h}){const u=n.useNavigate(),p=n.useNavigation(),[{searchvalues:g,page:f},{amount:E,pages:v,items:b}]=n.useLoaderData(),[F,S,N,T,k,L,R,I,O]=t(g,f,(function(e,n){const t={searchvalues:e,page:n};switch(s){case exports.SearchParams.PARAMS:const e=y(t);u((c?"/search?":"?")+e.toString());break;case exports.SearchParams.CODE:default:const n=x(t);u((c?"/search/":"/")+n)}window.scroll(0,0)}));return l&&(document.title=a?`Search | ${a}`:"Search"),e.createElement("div",{className:"hcContentContainer"},i&&e.createElement("div",{className:"hcBasicSideMargin hcMarginBottom1"},e.createElement("h1",null,"Search")),e.createElement("div",{className:"hcLayoutFacet-Result hcBasicSideMargin"},e.createElement("div",{className:"hcLayoutFacets"},e.createElement("div",{className:"hcLayoutFacetsToggel"},e.createElement(d,{registerFacet:S,unregisterFacet:N,setFacet:O,searchValues:g}))),e.createElement("div",{className:"hcLayoutResults"},e.createElement(w,{withPaging:!!o,amount:E,page:f,pages:v}),e.createElement(C,{labeledSearchValues:F,resetFacets:R,removeFacet:I}),h,"loading"===p.state?e.createElement("div",{className:"hcResultListLoading"},"Loading..."):e.createElement(e.Fragment,null,e.createElement("div",null,b.map(((n,t)=>e.createElement(m,{item:n,key:t})))),o&&E>r&&e.createElement(P,{page:f,pages:v,prevPage:k,nextPage:L,selectPage:T})))))}function w({withPaging:n,amount:t,page:a,pages:r}){return e.createElement("div",{className:"hcResultsHeader hcMarginBottom1"},n?t>9999?e.createElement("div",null,t,"+ results, page ",a," of ",r," pages"):e.createElement("div",null,t," results, page ",a," of ",r," pages"):e.createElement("div",null,t," items found"))}function C({labeledSearchValues:n,resetFacets:t,removeFacet:a}){return e.createElement("div",{className:"hcMarginBottom2"},e.createElement("div",{className:"hcSmallTxt hcTxtColorGreyMid"},"Selected facets:",e.createElement("span",{className:"hcFacetReset hcClickable",onClick:t},"Reset facets")),0===n.length?e.createElement("span",{className:"hcSelectedFacet"},e.createElement("span",{className:"hcSelectedFacetType"},"None")):n.map((n=>e.createElement("span",{className:"hcSelectedFacet",key:n.field},e.createElement("span",{className:"hcSelectedFacetType"},n.label,": "),n.values.map(((t,r)=>e.createElement("div",{className:"hcFacetValues",key:r,onClick:e=>a(n.field,t)},t," [x]")))))))}function P({page:n,pages:t,prevPage:a,nextPage:r,selectPage:c}){return e.createElement("div",{className:"hcPagination"},n>1&&e.createElement("div",{className:"hcClickable",onClick:a},"← Previous"),e.createElement("div",{className:"hcClickable"},e.createElement("select",{className:"hcPageSelector",value:n,onChange:e=>c(Number(e.target.value))},m(t).map((n=>e.createElement("option",{key:n,value:n},n))))),n<t&&e.createElement("div",{className:"hcClickable",onClick:r},"Next →"))}function N({title:t,updateDocumentTitle:a=!0,DetailComponent:r}){const c=n.useNavigation(),o=n.useLoaderData();return a&&(document.title=t?`Item | ${t}`:"Item"),"loading"===c.state?e.createElement("div",{className:"hcContentContainer"},e.createElement("div",null,"Loading")):e.createElement(r,{data:o})}exports.SearchParams=void 0,(b=exports.SearchParams||(exports.SearchParams={}))[b.CODE=0]="CODE",b[b.PARAMS=1]="PARAMS";i('@import url("https://fonts.googleapis.com/css?family=Roboto:300,300i,700,700i");\n\nhtml,\nbody {\n    padding: 0;\n    margin: 0;\n}\n\n* {\n    box-sizing: border-box;\n}\n\na {\n    color: #0087d4;\n    text-decoration: none;\n}\n\nhtml {\n    font-size: 100%;\n}\n\nbody {\n    font-family: "Roboto", sans-serif;\n    font-weight: 300;\n    font-size: 18px;\n    line-height: 140%;\n    font-style: normal;\n    background-color: #fff;\n    color: #3e3e3e;\n    margin: 0;\n    padding: 0;\n}\n\nh1 {\n    font-size: 1.5em;\n    line-height: 130%;\n    font-weight: 700;\n}\n\nh2 {\n    font-size: 1.3em;\n    line-height: 130%;\n    font-weight: 700;\n}\n\nh1, h2 {\n    margin-top: 0;\n    margin-bottom: 0.3em;\n}\n\n@media (min-width: 600px) {\n    body {\n        font-size: 18px;\n        line-height: 150%;\n    }\n\n    h1 {\n        font-size: 2em;\n    }\n\n    h1, h2 {\n        line-height: 150%;\n    }\n\n    span.hcSelectedFacet, span.hcSelectedFacetType {\n        display: flex;\n        flex-direction: row;\n        align-items: baseline;\n        padding-right: 1rem;\n    }\n}\n\n.hcContentContainer p {\n    margin-top: 0;\n    margin-bottom: 1em;\n}\n\n.hcFacet button, .hcButton {\n    font-size: 0.7rem;\n    padding: 0.5rem;\n    border-radius: 4px;\n    background-color: rgba(0, 0, 0, 0.07);\n    border: 1px solid rgba(0, 0, 0, 0.09);\n    cursor: pointer;\n    font-weight: 700;\n    margin: 0 0.3rem;\n    max-height: 40px;\n}\n\n.hcFacet input, .hcPageSelector select {\n    width: 100%;\n    padding: 0.5rem;\n    border: 1px solid #e1ebf3;\n    border-radius: 4px;\n    font-size: 1rem;\n    font-weight: 300;\n    color: #3e3e3e;\n    height: 40px;\n}\n\n.hcFacetSearch input::placeholder {\n    color: gray;\n    font-style: italic;\n    font-size: 0.85rem;\n}\n\n.hcContentContainer {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n}\n\n.hcTxtColorGreyMid {\n    color: #666666;\n}\n\n.hcSmallTxt {\n    font-size: 0.85rem;\n}\n\n.hcBasicSideMargin {\n    padding-left: 2rem;\n    padding-right: 2rem;\n}\n\n.hcMarginBottom1 {\n    margin-bottom: 1rem;\n}\n\n.hcMarginBottom2 {\n    margin-bottom: 2rem;\n}\n\n.hcResultsHeader {\n    display: flex;\n    justify-content: space-between;\n}\n\n.hcContentContainer > * {\n    width: 100%;\n    max-width: 1200px;\n}\n\n.hcLayoutFacet-Result {\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n}\n\n.hcLayoutFacets {\n    width: 100%;\n}\n\n.hcLayoutResults {\n    width: 100%;\n}\n\n.hcLayoutFacetsToggel {\n    display: flex;\n    height: 230px;\n    flex-direction: row;\n    overflow-x: hidden;\n    background-color: #fafafa;\n}\n\n.hcLayoutFacetsToggel div {\n    width: 250px;\n    margin-right: 3rem;\n}\n\n@media (min-width: 800px) {\n    .hcLayoutFacet-Result {\n        flex-direction: row;\n    }\n\n    .hcLayoutFacets {\n        width: 350px;\n    }\n\n    .hcLayoutResults {\n        width: calc(100% - 350px);\n    }\n\n    .hcLayoutFacetsToggel {\n        display: block;\n        overflow-x: hidden;\n        height: auto;\n        flex-direction: column;\n        background: none;\n    }\n\n    .hcLayoutFacetsToggel div {\n        width: 100%;\n        margin-right: auto;\n    }\n}\n\n.hcFacet {\n    margin-bottom: 1rem;\n    max-width: 250px;\n    font-size: 0.85rem;\n}\n\n.hcFacetItems {\n    display: flex;\n    flex-direction: column;\n}\n\n.hcFacetItem {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.hcFacetItem .hcFacetItemSpan {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    height: 15px;\n}\n\n.hcFacetItem .hcFacetItemSpan input[type=checkbox] {\n    width: 15px;\n    background-color: #eee090;\n}\n\n.hcFacetItemSelected {\n    font-weight: 700;\n}\n\n.hcFacetTitle {\n    text-transform: uppercase;\n    font-size: 0.85rem;\n    font-weight: 700;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-between;\n    cursor: pointer;\n}\n\n.hcFacetCount {\n    color: #666666;\n}\n\n.hcFacetSearch {\n    display: flex;\n    justify-content: space-between;\n}\n\n.hcFacetSearch input {\n    border-radius: 4px 0 0 4px;\n    border-right: 0;\n}\n\n.hcFacetSearch button {\n    margin: 0;\n    border-radius: 0 4px 4px 0;\n}\n\n.hcSelectedFacet {\n    font-size: 0.85rem;\n    padding: 0.2rem 0.5rem;\n    background-color: #f6f6f6;\n    border-radius: 3px;\n    margin: 0 0.5rem 0.5rem 0;\n    cursor: pointer;\n}\n\n.hcSelectedFacet:after {\n    margin-left: 0.3rem;\n    opacity: 0.4;\n}\n\n.hcSelectedFacetType {\n    color: rgba(0, 0, 0, 0.4);\n    font-style: italic;\n    margin-right: 0.3rem;\n}\n\n.hcFacetFilter input {\n    padding: 0.3rem;\n    font-size: 0.85rem;\n    height: auto;\n    border: 1px solid #ebebeb;\n}\n\n.hcFacetFilter input::placeholder {\n    font-style: italic;\n    color: rgba(0, 0, 0, 0.4);\n}\n\n.hcFacetHelp {\n    display: none;\n    position: absolute;\n    background-color: #25a39a;\n    padding: 0.5rem;\n    width: 250px;\n}\n\n.hcPagination {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    flex-wrap: wrap;\n}\n\n.hcPagination > * {\n    margin: 0 0.5rem;\n}\n\n.hcPagination a {\n    padding: 0.5rem;\n}\n\n.hcTxtColorGreyMid {\n    color: #999999;\n}\n\n.hcSmallTxt {\n    font-size: 0.9rem;\n}\n\n.hcClickable {\n    color: #0087d4;\n    cursor: pointer;\n    display: inline;\n}\n\n.hcPageSelector {\n    height: 36px;\n    font-size: 12px !important;\n}\n\n.hcFacetItem {\n    cursor: pointer;\n}\n\n.hcFacetReset {\n    float: right;\n}\n\n.hcFacetValues {\n    margin-right: 4px;\n}\n'),exports.App=o,exports.Detail=N,exports.FreeTextFacet=function({registerFacet:n,unregisterFacet:t,setFacet:r,name:c="Text search",field:o}){const[l,i,s,m]=a(n,t,r,c,o);return e.createElement("div",{className:"hcFacet"},e.createElement("div",{className:"hcFacetTitle"},c),e.createElement("div",{className:"hcFacetSearch"},e.createElement("input",{type:"text",value:l,placeholder:"Press ENTER to search",onChange:s,onKeyUp:m}),e.createElement("button",{type:"button",name:"button",onClick:i},"Search")))},exports.Home=l,exports.ListFacet=function({registerFacet:n,unregisterFacet:t,setFacet:a,name:c,field:o,url:l,searchValues:i,usePost:s=!1,flex:m=!0}){const[d,h,u,p,g,f,x]=r(c,o,l,n,t,a,i,s);return e.createElement("div",{className:"hcFacet"},e.createElement("div",{className:"hcFacetTitle",onClick:()=>p(!u)},e.createElement("span",null,c),e.createElement("span",{className:"hcIconHelp"},u?"+":"-")),!u&&e.createElement("div",{className:"hcFacetItems"},h?e.createElement("div",null,"Loading..."):e.createElement("div",null,d.map(((n,t)=>e.createElement("div",{key:t,className:"hcFacetItem",onClick:()=>x(n.key)},e.createElement("div",{className:"checkBoxLabel"}," ",n.key," (",n.doc_count,")")))),m&&e.createElement("div",{className:"hcClickable",onClick:f},g?e.createElement("div",null,"More..."):e.createElement("div",null,"Less...")))))},exports.PageHeader=s,exports.Router=function(t){const a=t.AppComponent?e.createElement(t.AppComponent,null,e.createElement(n.ScrollRestoration,null),e.createElement(n.Outlet,null)):e.createElement(o,{header:t.headerElement||e.createElement(s,{title:t.title}),footer:t.footerElement});let r,i;switch(t.searchParams){case exports.SearchParams.PARAMS:const e=c(v,t.searchUrl,t.pageLength,t.sortOrder);r=async({request:n})=>e(new URL(n.url).searchParams),i=t.hasIndexPage?null:"search";break;case exports.SearchParams.CODE:default:const n=c(E,t.searchUrl,t.pageLength,t.sortOrder);r=async({params:e})=>n(e.code),i=t.hasIndexPage?"search/:code":":code"}const m=e.createElement(S,{title:t.title,pageLength:t.pageLength,hasIndexPage:t.hasIndexPage,withPaging:t.withPaging,updateDocumentTitle:t.updateDocumentTitle,searchParams:t.searchParams,FacetsComponent:t.FacetsComponent,ResultItemComponent:t.ResultItemComponent,headersElement:t.headersElement}),d=[...t.childRoutes||[],{index:!0,loader:t.hasIndexPage?void 0:r,element:t.hasIndexPage?t.rootElement||e.createElement(l,{title:t.title,description:t.description}):m},{path:"detail/:id",loader:async({params:e})=>fetch(t.getFetchUrl(e.id)),element:e.createElement(N,{title:t.title,DetailComponent:t.DetailComponent})}];null!==i&&d.push({path:i,loader:r,element:m});const h={path:"/",element:a,children:d};return e.createElement(n.RouterProvider,{router:n.createBrowserRouter([h])})},exports.Search=S,exports.base64=f,exports.createDetailLoader=function(e){return async n=>fetch(e(n))},exports.createSearchLoader=c,exports.pagingUtils=d,exports.searchUtils=F,exports.useFreeTextFacet=a,exports.useListFacet=r,exports.useSearch=t;
